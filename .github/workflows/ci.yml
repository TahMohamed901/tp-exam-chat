name: CI - Build & Test du Chat

on:
  push:
    branches:
      - main

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout du code
        uses: actions/checkout@v4
        
      - name: Configuration de Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # --- √âtape 2: Tests et Build du Backend ---
      
      - name: Installation des d√©pendances du Backend (Test de l'installation)
        run: |
          echo "V√©rification des d√©pendances du Backend..."
          cd backend/
          npm install

      # (Optionnel : Ajoutez ici des commandes 'npm test' si vous aviez des tests unitaires)
      - name: Ex√©cution des tests Backend (Simulation)
        run: echo "Les tests unitaires du Backend s'ex√©cuteraient ici (e.g., npm test)."

      - name: Build de l'image Docker du Backend (Test de la configuration)
        # Ceci v√©rifie que le Dockerfile est correct et que l'image peut √™tre construite.
        run: docker build -t chat-backend-image ./backend

      # --- √âtape 3: Tests et Build du Frontend ---

      - name: Installation/Build du Frontend
        run: |
          cd frontend/
          # Si le Frontend est purement HTML/JS/CSS, l'√©tape est simple :
          echo "Frontend est simple HTML/JS/CSS, aucune installation npm requise."
          # Si le Frontend √©tait un projet React/Vue: npm install && npm run build

      - name: üî® Build de l'image Docker du Frontend (Test de la configuration)
        # Ceci v√©rifie que le Dockerfile est correct.
        run: docker build -t chat-frontend-image ./frontend

      # --- √âtape 4: Conclusion ---
      
      - name: Affichage du succ√®s de la CI
        run: echo "CI r√©ussie. Les services ont √©t√© construits et test√©s (d√©pendances + Dockerfile)."
        
  # Note: Les √©tapes de d√©ploiement (Deploy to Vercel/Render) ont √©t√© supprim√©es.

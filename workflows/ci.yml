name: CI - Build & Test du Chat

on:
  push:
    branches:
      - main

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    
    steps:
      - name: â¬‡ï¸ Checkout du code
        uses: actions/checkout@v4
        
      - name: ğŸ”§ Configuration de Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # --- Ã‰tape 2: Tests et Build du Backend ---
      
      - name: ğŸ“¦ Installation des dÃ©pendances du Backend (Test de l'installation)
        run: |
          echo "VÃ©rification des dÃ©pendances du Backend..."
          cd backend/
          npm install

      # (Optionnel : Ajoutez ici des commandes 'npm test' si vous aviez des tests unitaires)
      - name: ğŸ§ª ExÃ©cution des tests Backend (Simulation)
        run: echo "Les tests unitaires du Backend s'exÃ©cuteraient ici (e.g., npm test)."

      - name: ğŸ”¨ Build de l'image Docker du Backend (Test de la configuration)
        # Ceci vÃ©rifie que le Dockerfile est correct et que l'image peut Ãªtre construite.
        run: docker build -t chat-backend-image ./backend

      # --- Ã‰tape 3: Tests et Build du Frontend ---

      - name: ğŸ“¦ Installation/Build du Frontend
        run: |
          cd frontend/
          # Si le Frontend est purement HTML/JS/CSS, l'Ã©tape est simple :
          echo "Frontend est simple HTML/JS/CSS, aucune installation npm requise."
          # Si le Frontend Ã©tait un projet React/Vue: npm install && npm run build

      - name: ğŸ”¨ Build de l'image Docker du Frontend (Test de la configuration)
        # Ceci vÃ©rifie que le Dockerfile est correct.
        run: docker build -t chat-frontend-image ./frontend

      # --- Ã‰tape 4: Conclusion ---
      
      - name: âœ… Affichage du succÃ¨s de la CI
        run: echo "CI rÃ©ussie. Les services ont Ã©tÃ© construits et testÃ©s (dÃ©pendances + Dockerfile)."
        
  # Note: Les Ã©tapes de dÃ©ploiement (Deploy to Vercel/Render) ont Ã©tÃ© supprimÃ©es.
